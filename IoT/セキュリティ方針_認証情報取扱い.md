# IoT セキュリティ方針（認証情報取扱い）

[重要] 本方針は認証情報の漏えい防止を最優先とする。  
理由: 認証情報漏えいはデバイスなりすまし・不正更新に直結するため。

## 1. 定義
- 認証情報: 秘密鍵、トークン、証明書実体、パスワード、秘密ID、署名素材。
- 認証ロジック: 認証判定アルゴリズム、検証フロー、状態遷移制御（機密値を含まないもの）。

## 2. 基本方針
- [厳守] 認証情報ファイルはGitへ一切アップロードしない。
- [禁止] Pull Request、Issue、設計書、コメントへ認証実値を貼り付けない。
- [推奨] 認証ロジックは公開可能として分離し、機密値は外部注入する。
- [厳守] 第3段階のMQTTはTLS + ログインID/パスワード認証を必須とする。
- [禁止] MQTTを平文通信のみで運用しない。

## 3. 実装ルール
- [厳守] 機密は環境変数またはローカル安全領域から読み込む。
- [厳守] サンプル設定は `*.example` のみを公開し、実値はローカル専用にする。
- [新規利用禁止] ソースコードへの秘密値ハードコード。
- [禁止] 機密ファイル名を分かりにくく偽装して管理する運用。
- [厳守] TLS証明書検証を実施し、検証スキップをデフォルト化しない。

## 4. 監査ルール
- [厳守] コミット前に機密ファイル混入チェックを実施する。
- [推奨] `IoT/.gitignore` を定期見直しし、新規機密種別を反映する。

## 5. インシデント時対応
- [厳守] 認証情報流出疑い時は、直ちに無効化・ローテーションを実施する。
- [厳守] 原因、影響範囲、再発防止策を記録する。

## 6. 補足
- 認証ロジック自体の公開は可能とする。ただし、公開物に秘密値・秘密導出情報を含めない。

## 7. 変更履歴
- 2026-02-24: 新規作成。認証情報のアップロード禁止を明文化。
- 2026-02-24: 第3段階要件としてMQTT TLS + ID/パスワード認証必須を追加。
